Кислицына Арина, ИКБО-65-24

Конвертер конфигурационного файла в формат TOML

Программа представляет собой инструмент для преобразования пользовательского конфигурационного языка в стандартный формат TOML. Разработана на Java с использованием регулярных выражений для синтаксического анализа. Программа обрабатывает входные файлы, удаляя комментарии и пустые строки, анализирует структуру конфигурации и преобразует её в читаемый TOML-формат.

Основные возможности

Программа поддерживает различные типы данных и конструкции конфигурационного языка:

Объявление констант через ключевое слово var Пары ключ-значение для настройки параметров Строковые значения в двойных кавычках Целочисленные значения в десятичном и шестнадцатеричном форматах Булевы значения true/false Массивы значений, заключенные в конструкцию #(...) Использование ранее объявленных констант через синтаксис !{CONST_NAME} Поддержка однострочных комментариев (начинающихся с ;) Поддержка многострочных комментариев (обрамленных --[[ и ]]) Структура программы

Класс ConfigConverter организован как утилитарное приложение с основной логикой в статических методах. Программа использует несколько коллекций для хранения промежуточных данных: HashMap для констант и LinkedHashMap для результирующей TOML-структуры, что обеспечивает сохранение порядка добавления элементов.

Для синтаксического анализа реализован набор регулярных выражений, которые определяют различные конструкции входного языка. Парсинг выполняется в два этапа: сначала удаляются все комментарии и пустые строки, затем происходит анализ оставшегося содержимого и построение структуры данных.

Алгоритм работы

При запуске программа запрашивает путь к конфигурационному файлу. После проверки существования файла начинается процесс обработки. В первом проходе удаляются все комментарии и пустые строки. Во втором проходе каждая строка анализируется на соответствие паттернам объявления констант или пар ключ-значение.

Для значений выполняется рекурсивный парсинг с поддержкой различных типов данных. Особенностью реализации является обработка ссылок на константы - при обнаружении конструкции !{CONST_NAME} программа проверяет наличие соответствующей константы в хранилище и подставляет её значение.

После завершения парсинга происходит преобразование внутренней структуры данных в TOML-строку с корректным форматированием и экранированием специальных символов. Результат выводится в консоль в удобочитаемом виде.

Обработка ошибок

Программа включает механизм обработки ошибок с информативными сообщениями. При возникновении синтаксических ошибок выводится номер проблемной строки и её содержимое. Проверяются такие ситуации как неопределённые константы, некорректный синтаксис массивов, отсутствие закрывающих скобок и другие распространённые ошибки конфигурационных файлов.

Формат вывода

Результат преобразования соответствует спецификации TOML (Tom's Obvious, Minimal Language) - популярному формату конфигурационных файлов. Строки экранируются с учётом специальных символов, массивы форматируются в квадратных скобках с разделителями-запятыми, сохраняется исходный порядок параметров из входного файла.

Программа представляет собой законченное решение для преобразования пользовательских конфигураций в стандартизированный формат, что упрощает интеграцию с современными системами и инструментами, поддерживающими TOML.
Пример ввода в программу(C:\Users\marke\IdeaProjects\6_2\lib\test.txt)
Пример корректного вывода программы:
_____________________________________________________________
Обработка файла: C:\Users\marke\IdeaProjects\6_2\lib\test.txt
Результат в формате TOML:
server  "MyWebServer"
port  8080
max_clients  100
ports  [80, 443, 8080]
timeout  30
welcome_message  "Добро пожаловать на наш сервер"
features  ["ssl", "compression", "caching"]
_____________________________________________________________
